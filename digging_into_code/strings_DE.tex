\section{Strings}
\label{sec:digging_strings}

\input{digging_into_code/strings/main_EN}

\subsection{Finding strings in binary}

\myindex{UNIX!strings}
Das Standart UNIX \IT{strings} utility ist ein quick-n-dirty Weg um alle Strings in der 
Datei an zu schauen. Zum Beispiel, in der OpenSSH 7.2 sshd executable Datei gibt es einige Strings:
% \myindex{UNIX!strings}
% The standard UNIX \IT{strings} utility is quick-n-dirty way to see strings in file.
% For example, these are some strings from OpenSSH 7.2 sshd executable file:

\lstinputlisting{digging_into_code/sshd_strings.txt}

Dort kann man Optionen, Fehler meldungen, Datei pfade, importierte dynamische Module, Funktionen und einige andere komische 
Strings (keys?) sehen. Es gibt auch nicht druckbare Zeichen---x86 Code enthält chunks von druckbaren ASCII Zeichen, bis zu ca 8 Zeichen. % <-- bessere formulierung?

% There are options, error messages, file paths, imported dynamic modules and functions, some other strange strings (keys?)
% There is also unreadable noise---x86 code sometimes has chunks consisting of printable ASCII characters, up to ~8 characters.

Sicher, OpenSSH ist ein open-source Programm.
Aber sich die lesbaren Strings eines unbekannten Programms an zuschauen ist meist der erste Schritt bei 
der Analyse. 
% Of course, OpenSSH is open-source program.
% But looking at readable strings inside of some unknown binary is often a first step of analysis.
\myindex{UNIX!grep}

\IT{grep} kann genauso benutzt werden.
% \IT{grep} can be applied as well.

\myindex{Hiew}
\myindex{Sysinternals}
Hiew hat die gleichen Fähigkeiten (Alt-F6), genau wie der Sysinternals ProcessMonitor.
% Hiew has the same capability (Alt-F6), as well as Sysinternals ProcessMonitor.

\subsection{Error/debug messages}

Debugging Messages sind auch sehr nützlich, falls vorhanden.
Auf gewisse weise, melden die debugging messages was grade
im Programm vorgeht. Oft schreiben diese \printf-like Funktionen, welche
in log-Datein schreiben oder manchmal auch garnichts schreiben aber die 
calls sind noch vorhanden, weil der build kein Debug build aber ein \IT{release} ist. % <-- nochmal über formulierung nachdenken
\myindex{\oracle}

% Debugging messages are very helpful if present.
% In some sense, the debugging messages are reporting
% what's going on in the program right now. Often these are \printf-like functions,
% which write to log-files, or sometimes do not writing anything but the calls are still present 
% since the build is not a debug one but \IT{release} one.
% \myindex{\oracle}

Wenn lokale oder globale Variablen in Debug messages geschrieben werden, kann das auch 
hilfreich sein da man so an die Variablen namen kommt. % <-- auch kacke geschrieben noch mal drüber nachdenken
Zum Beispiel, eine solche Funktion in \oracle ist \TT{ksdwrt()}.

% If local or global variables are dumped in debug messages, it might be helpful as well 
% since it is possible to get at least the variable names.
% For example, one of such function in \oracle is \TT{ksdwrt()}.

Textstrings mit Aussage sind oft auch Hilfreich. %<-- der ist auch kacke
Der \IDA disassembler zeigt welche Funktion und von welchem Punkt aus ein spezifischer String benutzt wird.
Manchmal passieren lustige dinge dabei\footnote{\href{http://go.yurichev.com/17223}{blog.yurichev.com}}.

% Meaningful text strings are often helpful.
% The \IDA disassembler may show from which function and from which point this specific string is used.
% Funny cases sometimes happen\footnote{\href{http://go.yurichev.com/17223}{blog.yurichev.com}}.

Fehlermeldungen helfen uns genauso.
In \oracle, werden Fehler von einer Gruppe von Funktionen gemeldet.
Über das Thema kann man mehr hier erfahren: \href{http://go.yurichev.com/17224}{blog.yurichev.com}.

% The error messages may help us as well.
% In \oracle, errors are reported using a group of functions.\\
% You can read more about them here: \href{http://go.yurichev.com/17224}{blog.yurichev.com}.

\myindex{Error messages}

Es ist Möglich heraus zu finden welche Funktionen Fehler melden und unter welchen Bedingungen.
% It is possible to find quickly which functions report errors and in which conditions.


Übrigens, das ist für Kopierschutztsysteme oft der grund cryptische Fehlermeldungen oder einfach nur 
Fehlernumern aus zu geben. Niemand ist glücklich darüber wenn der Softwarecracker den Kopierschutz besser
versteht nur weil dieser durch eine Fehlermeldung ausgelöst wurde.

% By the way, this is often the reason for copy-protection systems to inarticulate cryptic error messages 
% or just error numbers. No one is happy when the software cracker quickly understand why the copy-protection
% is triggered just by the error message.

Ein Beispiel von verschlüsselten Fehlermeldungen gibt es hier: \myref{examples_SCO}.
% One example of encrypted error messages is here: \myref{examples_SCO}.

\subsection{Suspicious magic strings}

Manche Magic Strings welche in Hintertüren benutzt werden sehen schon ziemlich verdächtig aus.
% Some magic strings which are usually used in backdoors looks pretty suspicious.


Zum Beispiel, es gab eine Hintertür im TP-Link WR740 Home Router\footnote{\url{http://sekurak.pl/tp-link-httptftp-backdoor/}}.
Die Hintertür konnte aktiviert werden wenn man folgende URL aufrief:
\url{http://192.168.0.1/userRpmNatDebugRpm26525557/start_art.html}.\\
% For example, there was a backdoor in the TP-Link WR740 home router\footnote{\url{http://sekurak.pl/tp-link-httptftp-backdoor/}}.
% The backdoor can activated using the following URL:\\
% \url{http://192.168.0.1/userRpmNatDebugRpm26525557/start_art.html}.\\

Tatzächlich, kann man den Magic String \q{userRpmNatDebugRpm26525557} in der Firmware finden.
% Indeed, the \q{userRpmNatDebugRpm26525557} string is present in the firmware.

Der String war nicht googlebar bis die Information öffentlich über die Hintertür öffentlich verbreitet wurde.

% This string was not googleable until the wide disclosure of information about the backdoor.

Man würde solche Information auch nicht in irgendeinem \ac{RFC} finden. %<-- nochmal drüber nachdenken
% You would not find this in any \ac{RFC}.

Man würde auch keinen Informatik Algorithmus finden der solch seltsame Byte Sequenzen benutzt.

% You would not find any computer science algorithm which uses such strange byte sequences.

Und es sieht auch nicht nach einer Fehler- order Debugnaricht aus.

% And it doesn't look like an error or debugging message.

Also es ist immer eine gute Idee so seltsame Dinge genauer zu betrachten.\\
\\
\myindex{base64}
% So it's a good idea to inspect the usage of such weird strings.\\
% \\
% \myindex{base64}

Manchmal, sind soclhe Strings auch mit base64 codiert.
% Sometimes, such strings are encoded using
% base64.

Es ist also immer eine gute Idee diese Stings zu decodieren und sie visuell zu durchsuchen, ein Blink
kann schon genügen.
% So it's a good idea to decode them all and to scan them visually, even a glance should be enough.\\
\\
\myindex{Security through obscurity}
Präziser gesagt, diese Methode Hintertüren zu verstecken nennt man \q{security through obscurity}.
% More precise, this method of hiding backdoors is called \q{security through obscurity}.

